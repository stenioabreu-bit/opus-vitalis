<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - √çcones SVG e Seletores</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <style>
        .test-container {
            max-width: 1000px;
            margin: 50px auto;
            padding: 30px;
        }
        
        .test-section {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .test-title {
            color: var(--accent-crimson);
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .icons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .icon-demo {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 15px;
            text-align: center;
        }
        
        .icon-demo .icon {
            font-size: 2em;
            margin-bottom: 10px;
            display: block;
        }
        
        .selectors-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .selector-group {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
        }
        
        .selector-title {
            color: var(--accent-blue);
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        /* Padroniza√ß√£o de Seletores */
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            color: var(--text-secondary);
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 12px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--accent-crimson);
            box-shadow: 0 0 0 2px var(--crimson-glow);
        }
        
        .form-control:hover {
            border-color: var(--accent-crimson-light);
        }
        
        /* Checkbox e Radio padronizados */
        .checkbox-group, .radio-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .checkbox-group input[type="checkbox"],
        .radio-group input[type="radio"] {
            width: 18px;
            height: 18px;
            margin-right: 10px;
            accent-color: var(--accent-crimson);
        }
        
        .checkbox-group label,
        .radio-group label {
            margin: 0;
            cursor: pointer;
            user-select: none;
        }
        
        /* Bot√µes padronizados */
        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        
        .test-btn {
            background: var(--accent-crimson);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .test-btn:hover {
            background: var(--accent-crimson-light);
            transform: translateY(-1px);
        }
        
        .test-btn.secondary {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
        }
        
        .test-btn.success {
            background: var(--success-green);
        }
        
        .test-btn.danger {
            background: var(--error-red);
        }
        
        .delete-test {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .delete-test h4 {
            color: var(--error-red);
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="color: var(--accent-crimson); text-align: center; margin-bottom: 30px;">
            üé® Teste - √çcones SVG e Seletores Padronizados
        </h1>
        
        <!-- Se√ß√£o de √çcones -->
        <div class="test-section">
            <div class="test-title">üìã Demonstra√ß√£o de √çcones SVG</div>
            
            <div class="icons-grid">
                <div class="icon-demo">
                    <div class="icon icon-success icon-xl">‚úÖ</div>
                    <div>Sucesso</div>
                </div>
                
                <div class="icon-demo">
                    <div class="icon icon-error icon-xl">‚ùå</div>
                    <div>Erro</div>
                </div>
                
                <div class="icon-demo">
                    <div class="icon icon-warning icon-xl">‚ö†Ô∏è</div>
                    <div>Aviso</div>
                </div>
                
                <div class="icon-demo">
                    <div class="icon icon-info icon-xl">‚ÑπÔ∏è</div>
                    <div>Informa√ß√£o</div>
                </div>
                
                <div class="icon-demo">
                    <div class="icon icon-spin icon-xl">üîÑ</div>
                    <div>Carregando</div>
                </div>
                
                <div class="icon-demo">
                    <div class="icon icon-crimson icon-xl">üõ°Ô∏è</div>
                    <div>Prote√ß√£o</div>
                </div>
            </div>
            
            <button class="test-btn" onclick="testIconReplacement()">
                üîÑ Testar Substitui√ß√£o de Emojis
            </button>
        </div>
        
        <!-- Se√ß√£o de Seletores -->
        <div class="test-section">
            <div class="test-title">üéõÔ∏è Seletores Padronizados</div>
            
            <div class="selectors-demo">
                <!-- Inputs de Texto -->
                <div class="selector-group">
                    <div class="selector-title">üìù Inputs de Texto</div>
                    
                    <div class="form-group">
                        <label for="text-input">Campo de Texto:</label>
                        <input type="text" id="text-input" class="form-control" placeholder="Digite algo...">
                    </div>
                    
                    <div class="form-group">
                        <label for="email-input">Email:</label>
                        <input type="email" id="email-input" class="form-control" placeholder="seu@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="textarea-input">Textarea:</label>
                        <textarea id="textarea-input" class="form-control" rows="3" placeholder="Descri√ß√£o..."></textarea>
                    </div>
                </div>
                
                <!-- Selects e Checkboxes -->
                <div class="selector-group">
                    <div class="selector-title">üìã Selects e Checkboxes</div>
                    
                    <div class="form-group">
                        <label for="select-input">Select:</label>
                        <select id="select-input" class="form-control">
                            <option value="">Selecione uma op√ß√£o</option>
                            <option value="1">Op√ß√£o 1</option>
                            <option value="2">Op√ß√£o 2</option>
                            <option value="3">Op√ß√£o 3</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Checkboxes:</label>
                        <div class="checkbox-group">
                            <input type="checkbox" id="check1" value="1">
                            <label for="check1">Bella Evans</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="check2" value="2">
                            <label for="check2">Melissa Kardelis</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="check3" value="3">
                            <label for="check3">Tao Feng</label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Radio Buttons:</label>
                        <div class="radio-group">
                            <input type="radio" id="radio1" name="role" value="agent">
                            <label for="radio1">Agente</label>
                        </div>
                        <div class="radio-group">
                            <input type="radio" id="radio2" name="role" value="leader">
                            <label for="radio2">L√≠der</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bot√µes -->
            <div class="selector-group">
                <div class="selector-title">üîò Bot√µes Padronizados</div>
                
                <div class="btn-group">
                    <button class="test-btn">
                        üëÅÔ∏è Ver Relat√≥rio
                    </button>
                    
                    <button class="test-btn secondary">
                        ‚úèÔ∏è Editar
                    </button>
                    
                    <button class="test-btn success">
                        üöÄ Compartilhar com Todos
                    </button>
                    
                    <button class="test-btn danger">
                        üóëÔ∏è Excluir
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Teste de Exclus√£o -->
        <div class="test-section">
            <div class="test-title">üóëÔ∏è Teste de Exclus√£o de Relat√≥rios</div>
            
            <div class="delete-test">
                <h4>Teste da Funcionalidade de Exclus√£o</h4>
                <p style="color: var(--text-secondary); margin-bottom: 15px;">
                    Clique no bot√£o abaixo para testar se a exclus√£o de relat√≥rios est√° funcionando:
                </p>
                
                <button class="test-btn danger" onclick="testDeleteFunction()">
                    üóëÔ∏è Testar Exclus√£o de Relat√≥rio
                </button>
                
                <div id="delete-status" style="margin-top: 15px; font-family: monospace; background: var(--bg-primary); padding: 10px; border-radius: 4px;">
                    Aguardando teste...
                </div>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <a href="reports.html" class="test-btn">üìã Ver Relat√≥rios</a>
            <a href="dashboard.html" class="test-btn secondary">üè† Dashboard</a>
        </div>
    </div>

    <!-- Scripts -->
    <script src="scripts/utils.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/data-loader.js"></script>
    <script src="scripts/sync-service.js"></script>
    <script src="scripts/reports.js"></script>
    <script src="scripts/icons.js"></script>
    
    <script>
        let authService, reportsService;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', async function() {
            // Initialize services
            authService = new AuthService();
            reportsService = new ReportsService();
            
            // Login as test user
            const userData = {
                id: "user_001",
                username: "bella_evans",
                name: "Bella Evans",
                role: "agent"
            };
            authService.currentUser = userData;
            window.authServiceInstance = authService;
            localStorage.setItem('opus_vitalis_session', JSON.stringify(userData));
            
            console.log('‚úÖ Sistema inicializado para testes');
        });
        
        // Test icon replacement
        function testIconReplacement() {
            const testElements = document.querySelectorAll('.icon-demo div:last-child');
            
            testElements.forEach(element => {
                const originalText = element.textContent;
                const newText = originalText + ' ‚úÖüîÑ‚ùå‚ö†Ô∏è';
                element.innerHTML = window.iconManager.replaceEmojisWithIcons(newText);
            });
            
            alert('√çcones substitu√≠dos! Verifique se os emojis foram trocados por SVGs.');
        }
        
        // Test delete function
        async function testDeleteFunction() {
            const statusElement = document.getElementById('delete-status');
            
            function log(message, type = 'info') {
                const timestamp = new Date().toLocaleTimeString();
                const className = type === 'success' ? 'color: var(--success-green)' : 
                                type === 'error' ? 'color: var(--error-red)' : 
                                type === 'warning' ? 'color: var(--warning-orange)' : '';
                
                statusElement.innerHTML += `<div style="${className}">[${timestamp}] ${message}</div>`;
                statusElement.scrollTop = statusElement.scrollHeight;
            }
            
            statusElement.innerHTML = '';
            log('üß™ Iniciando teste de exclus√£o...', 'info');
            
            try {
                const currentUser = authService.getCurrentUser();
                if (!currentUser) {
                    log('‚ùå Usu√°rio n√£o autenticado', 'error');
                    return;
                }
                
                log(`üë§ Usu√°rio: ${currentUser.name}`, 'info');
                
                // First, create a test report
                log('üìù Criando relat√≥rio de teste...', 'info');
                
                const reportData = {
                    title: 'Relat√≥rio para Teste de Exclus√£o',
                    description: 'Este relat√≥rio ser√° criado e depois exclu√≠do para testar a funcionalidade.',
                    missionDate: new Date().toISOString().split('T')[0],
                    status: 'completed'
                };
                
                const createResult = await reportsService.createReport(reportData);
                
                if (!createResult.success) {
                    log(`‚ùå Erro ao criar relat√≥rio: ${createResult.message}`, 'error');
                    return;
                }
                
                const reportId = createResult.report.id;
                log(`‚úÖ Relat√≥rio criado: ${reportId}`, 'success');
                
                // Wait a moment
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // Now try to delete it
                log('üóëÔ∏è Tentando excluir o relat√≥rio...', 'warning');
                
                const deleteResult = await reportsService.deleteReport(reportId, currentUser.id);
                
                if (deleteResult.success) {
                    log('üéâ SUCESSO! Exclus√£o funcionou!', 'success');
                    log(`‚úÖ ${deleteResult.message}`, 'success');
                    
                    // Verify it's really gone
                    log('üîç Verificando se foi realmente exclu√≠do...', 'info');
                    const checkResult = await reportsService.getReport(reportId);
                    
                    if (!checkResult) {
                        log('‚úÖ Confirmado: Relat√≥rio foi exclu√≠do da nuvem!', 'success');
                    } else {
                        log('‚ö†Ô∏è Relat√≥rio ainda existe na nuvem', 'warning');
                    }
                } else {
                    log(`‚ùå ERRO na exclus√£o: ${deleteResult.message}`, 'error');
                }
                
            } catch (error) {
                log(`‚ùå ERRO CR√çTICO: ${error.message}`, 'error');
                console.error('Delete test error:', error);
            }
        }
    </script>
</body>
</html>